#pragma config(Sensor, port8,  gyro,           sensorVexIQ_Gyro)
#pragma config(Motor,  motor1,          left,          tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor2,          right,         tmotorVexIQ, PIDControl, reversed, encoder)
#pragma config(Motor,  motor3,          side,          tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor5,          rightArmMotor, tmotorVexIQ, PIDControl, reversed, encoder)
#pragma config(Motor,  motor6,          leftArmMotor,  tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor12,         frontClaw,     tmotorVexIQ, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

void rotate(float angle, float speed, float overshoot){
	if (angle > getGyroHeadingFloat(gyro)){
		while ((angle - overshoot) > getGyroHeadingFloat(gyro)){
			motor[left] = -speed;
			motor[right] = speed;
		}
	}
	else{
		while ((angle + overshoot) < getGyroHeadingFloat(gyro)){
			motor[left] = speed;
			motor[right] = -speed;
		}
	}
	motor[left] = 0;
	motor[right] = 0;
}

void strafe(int amount, int speed){
	resetMotorEncoder(side);

	if(amount > 0){
		motor[side]	= speed;
	}
	else if(amount < 0){
		motor[side] = -speed;
	}
	else{
		motor[side] = 0;
	}
	while(abs(getMotorEncoder(side) - amount) > 40){}
	motor[side] = 0;
}

void drive(float amount, float speed, float angle, float kp){
	resetMotorEncoder(right);
	resetMotorEncoder(left);
	if (speed > 0){
		while(getMotorEncoder(left) < amount){
			float error = angle - getGyroHeadingFloat(gyro);
			float output = error * kp;
			motor[left] = speed - output;
			motor[right] = speed + output;
		}
	}
	else{
		while(getMotorEncoder(left) > amount){
			float error = angle - getGyroHeadingFloat(gyro);
			float output = error * kp;
			motor[left] = -(speed - output);
			motor[right] = -(speed + output);
		}
	}
	motor[right] = 0;
	motor[left]	= 0;
}
void moveBottomClaw(bool raise){
	if(raise){
		motor[frontClaw] = 100;
	}
	else{
		motor[frontClaw] = -100;
	}
	while(getMotorCurrent(frontClaw) < 500){writeDebugStreamLine("%d", getMotorCurrent(frontClaw));}
	motor[frontClaw] = 0;
}

void moveArm(int amount, int speed){
	resetMotorEncoder(leftArmMotor);
	resetMotorEncoder(rightArmMotor);
	if(amount > 0){
		motor[leftArmMotor]	= speed;
		motor[rightArmMotor]	= speed;
	}
	else if(amount < 0){
		motor[leftArmMotor]	= -speed;
		motor[rightArmMotor]	= -speed;
	}
	else{
		motor[leftArmMotor]	= 0;
		motor[rightArmMotor] = 0;
	}
	while(abs((getMotorEncoder(rightArmMotor) + getMotorEncoder(leftArmMotor)) / 2 - amount) > 20){
	}
	motor[leftArmMotor]	= 0;
	motor[rightArmMotor] = 0;
}

task main()
{
startGyroCalibration(gyro, gyroCalibrateSamples2048);
while(getGyroCalibrationFlag(gyro)){}
resetGyro(gyro);
drive(2000, 80, 0, 2);
rotate(-90, 50, 10);
//	firstRiser();
//	wait1Msec(5000);
//	middleRiser();
//	wait1Msec(5000);
//	wait1Msec(1000);
//	lastRiser();
}
